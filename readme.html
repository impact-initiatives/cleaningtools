<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NA • cleaningtools</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="NA"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">cleaningtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>NA</h1>

    </div>


<div class="section level2">
<h2 id="cleaningtools">cleaningtools<a class="anchor" aria-label="anchor" href="#cleaningtools"></a></h2>
<!-- badges: start -->
<p><a href="code_of_conduct.html"><img src="https://img.shields.io/badge/Contributor%20Covenant-2.1-4baaaa.svg" alt="Contributor Covenant"></a> <a href="https://github.com/impact-initiatives/cleaningtools/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/impact-initiatives/cleaningtools/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://app.codecov.io/gh/impact-initiatives/cleaningtools?branch=main" class="external-link"><img src="https://codecov.io/gh/impact-initiatives/cleaningtools/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></p>
<!-- badges: end -->
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
The <code>cleaningtools</code> package focuses on cleaning, and has three components:
<p>
</p>
<p><strong>1. Check</strong>, which includes a set of functions that flag values, such as check_outliers and check_logical. <br><strong>2. Create</strong>, which includes a set of functions to create different items for use in cleaning, such as the cleaning log from the checks, clean data, and enumerator performance. <br><strong>3. Review</strong>, which includes a set of functions to review the cleaning, such as reviewing the cleaning.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a></h2>
<p>You can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"impact-initiatives/cleaningtools"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="template">Template<a class="anchor" aria-label="anchor" href="#template"></a></h2>
<p>You can use the R studio wizard to create project template.</p>
<p><img src="reference/figures/template_wizard.png"></p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
<div class="section level3">
<h3 id="id_1-checks-on-the-dataset">1. Checks on the dataset<a class="anchor" aria-label="anchor" href="#id_1-checks-on-the-dataset"></a></h3>
<div class="section level4">
<h4 id="id_11-check-of-pii">1.1 Check of PII<a class="anchor" aria-label="anchor" href="#id_11-check-of-pii"></a></h4>
<p><code><a href="reference/check_pii.html">check_pii()</a></code> function takes raw data (input can be dataframe or list. However incase of list, you must specify the element name in <code>element_name</code> parameter!) and looks for potential PII in the dataset. By default, the function will look for following words but you can also add additional words to look by using <code>words_to_look</code> parameter.The default words are-<code>c("telephone","contact","name","gps","neighbourhood","latitude","logitude","contact","nom","gps","voisinage")</code>. The function will give a list with two element. One will be the data and second one will be the list of potential PII</p>
<ul><li>Using dataframe as input</li>
</ul><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_from_data</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_pii.html">check_pii</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_raw_data.html">cleaningtools_raw_data</a></span>, words_to_look <span class="op">=</span> <span class="st">"date"</span>, uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span></span>
<span><span class="va">output_from_data</span><span class="op">$</span><span class="va">potential_PII</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   uuid  question                              issue        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                                 &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 all   date_assessment                       Potential PII</span></span>
<span><span class="co">#&gt; 2 all   neighbourhood                         Potential PII</span></span>
<span><span class="co">#&gt; 3 all   return_date                           Potential PII</span></span>
<span><span class="co">#&gt; 4 all   water_supply_rest_neighbourhood       Potential PII</span></span>
<span><span class="co">#&gt; 5 all   water_supply_other_neighbourhoods     Potential PII</span></span>
<span><span class="co">#&gt; 6 all   water_supply_other_neighbourhoods_why Potential PII</span></span></code></pre></div>
<ul><li>Using list as input</li>
</ul><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### from list</span></span>
<span><span class="va">df_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_raw_data.html">cleaningtools_raw_data</a></span><span class="op">)</span></span>
<span><span class="va">output_from_list</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_pii.html">check_pii</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">df_list</span>, element_name <span class="op">=</span> <span class="st">"raw_data"</span>, words_to_look <span class="op">=</span> <span class="st">"date"</span>, uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span></span>
<span><span class="va">output_from_list</span><span class="op">$</span><span class="va">potential_PII</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   uuid  question                              issue        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                                 &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 all   date_assessment                       Potential PII</span></span>
<span><span class="co">#&gt; 2 all   neighbourhood                         Potential PII</span></span>
<span><span class="co">#&gt; 3 all   return_date                           Potential PII</span></span>
<span><span class="co">#&gt; 4 all   water_supply_rest_neighbourhood       Potential PII</span></span>
<span><span class="co">#&gt; 5 all   water_supply_other_neighbourhoods     Potential PII</span></span>
<span><span class="co">#&gt; 6 all   water_supply_other_neighbourhoods_why Potential PII</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_12-check-of-duration-from-audits">1.2 Check of duration from audits<a class="anchor" aria-label="anchor" href="#id_12-check-of-duration-from-audits"></a></h4>
<div class="section level5">
<h5 id="id_121-reading-the-audits-files">1.2.1 Reading the audits files<a class="anchor" aria-label="anchor" href="#id_121-reading-the-audits-files"></a></h5>
<p>It will read only the compressed file.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_audit_list</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/create_audit_list.html">create_audit_list</a></span><span class="op">(</span>audit_zip_path <span class="op">=</span> <span class="st">"audit_for_tests_100.zip"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="id_122-adding-the-duration-to-the-dataset">1.2.2 Adding the duration to the dataset<a class="anchor" aria-label="anchor" href="#id_122-adding-the-duration-to-the-dataset"></a></h5>
<p>Once you have read your audit file from the zip, you will get a list of audit. You can use this list to calculate and add the duration. You have 2 options with a start and end question or summing all the durations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_audit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  uuid1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    event <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"form start"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"question"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    node <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/xx/question"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fl">1661415887295</span>, <span class="fl">1661415887301</span>,</span>
<span>      <span class="fl">1661415890819</span>, <span class="fl">1661415892297</span>,</span>
<span>      <span class="fl">1661415893529</span>, <span class="fl">1661415894720</span></span>
<span>    <span class="op">)</span>,</span>
<span>    end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="cn">NA</span>, <span class="fl">1661415890790</span>, <span class="fl">1661415892273</span>,</span>
<span>      <span class="fl">1661415893506</span>, <span class="fl">1661415894703</span>,</span>
<span>      <span class="fl">1661415896452</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  uuid2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    event <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"form start"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"question"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    node <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/xx/question"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1661415887295</span>, <span class="fl">1661415887301</span>, <span class="fl">1661415890819</span>, <span class="fl">1661415892297</span>, <span class="fl">1661415893529</span>, <span class="fl">1661415894720</span><span class="op">)</span>,</span>
<span>    end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1661415890790</span>, <span class="fl">1661415892273</span>, <span class="fl">1661415893506</span>, <span class="fl">1661415894703</span>, <span class="fl">1661415896452</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">some_dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  X_uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"uuid1"</span>, <span class="st">"uuid2"</span><span class="op">)</span>,</span>
<span>  question1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>,</span>
<span>  question2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>,</span>
<span>  question3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>,</span>
<span>  question4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>,</span>
<span>  question5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you want to sum all the duration.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/add_duration_from_audit.html">add_duration_from_audit</a></span><span class="op">(</span><span class="va">some_dataset</span>, uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, audit_list <span class="op">=</span> <span class="va">list_audit</span><span class="op">)</span></span>
<span><span class="co">#&gt;   X_uuid question1 question2 question3 question4 question5</span></span>
<span><span class="co">#&gt; 1  uuid1         a         a         a         a         a</span></span>
<span><span class="co">#&gt; 2  uuid2         b         b         b         b         b</span></span>
<span><span class="co">#&gt;   duration_audit_sum_all_ms duration_audit_sum_all_minutes</span></span>
<span><span class="co">#&gt; 1                      9058                            0.2</span></span>
<span><span class="co">#&gt; 2                      9058                            0.2</span></span></code></pre></div>
<p>If you want to use calculate duration between 2 questions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/add_duration_from_audit.html">add_duration_from_audit</a></span><span class="op">(</span><span class="va">some_dataset</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, audit_list <span class="op">=</span> <span class="va">list_audit</span>,</span>
<span>  start_question <span class="op">=</span> <span class="st">"question1"</span>,</span>
<span>  end_question <span class="op">=</span> <span class="st">"question3"</span>,</span>
<span>  sum_all <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   X_uuid question1 question2 question3 question4 question5</span></span>
<span><span class="co">#&gt; 1  uuid1         a         a         a         a         a</span></span>
<span><span class="co">#&gt; 2  uuid2         b         b         b         b         b</span></span>
<span><span class="co">#&gt;   duration_audit_start_end_ms duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 1                        6205                              0.1</span></span>
<span><span class="co">#&gt; 2                        6205                              0.1</span></span></code></pre></div>
<p>If you want to do both.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/add_duration_from_audit.html">add_duration_from_audit</a></span><span class="op">(</span><span class="va">some_dataset</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, audit_list <span class="op">=</span> <span class="va">list_audit</span>,</span>
<span>  start_question <span class="op">=</span> <span class="st">"question1"</span>,</span>
<span>  end_question <span class="op">=</span> <span class="st">"question3"</span>,</span>
<span>  sum_all <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   X_uuid question1 question2 question3 question4 question5</span></span>
<span><span class="co">#&gt; 1  uuid1         a         a         a         a         a</span></span>
<span><span class="co">#&gt; 2  uuid2         b         b         b         b         b</span></span>
<span><span class="co">#&gt;   duration_audit_sum_all_ms duration_audit_sum_all_minutes</span></span>
<span><span class="co">#&gt; 1                      9058                            0.2</span></span>
<span><span class="co">#&gt; 2                      9058                            0.2</span></span>
<span><span class="co">#&gt;   duration_audit_start_end_ms duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 1                        6205                              0.1</span></span>
<span><span class="co">#&gt; 2                        6205                              0.1</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="id_123-checking-the-duration-of-the-dataset">1.2.3 checking the duration of the dataset<a class="anchor" aria-label="anchor" href="#id_123-checking-the-duration-of-the-dataset"></a></h5>
<p>Once you have added the duration to the dataset, you can check if duration are between the threshold you are looking for.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  duration_audit_start_end_ms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">2475353</span>, <span class="fl">375491</span>, <span class="fl">2654267</span>, <span class="fl">311585</span>, <span class="fl">817270</span>,</span>
<span>    <span class="fl">2789505</span>, <span class="fl">8642007</span></span>
<span>  <span class="op">)</span>,</span>
<span>  duration_audit_start_end_minutes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">41</span>, <span class="fl">6</span>, <span class="fl">44</span>, <span class="fl">5</span>, <span class="fl">14</span>, <span class="fl">46</span>, <span class="fl">144</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span><span class="va">testdata</span>, column_to_check <span class="op">=</span> <span class="st">"duration_audit_start_end_minutes"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid duration_audit_start_end_ms duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 1    a                     2475353                               41</span></span>
<span><span class="co">#&gt; 2    b                      375491                                6</span></span>
<span><span class="co">#&gt; 3    c                     2654267                               44</span></span>
<span><span class="co">#&gt; 4    d                      311585                                5</span></span>
<span><span class="co">#&gt; 5    e                      817270                               14</span></span>
<span><span class="co">#&gt; 6    f                     2789505                               46</span></span>
<span><span class="co">#&gt; 7    g                     8642007                              144</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duration_log</span></span>
<span><span class="co">#&gt;   uuid old_value                         question</span></span>
<span><span class="co">#&gt; 1    b         6 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 2    d         5 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 3    e        14 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 4    g       144 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt;                                             issue</span></span>
<span><span class="co">#&gt; 1 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 2 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 3 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 4 Duration is lower or higher than the thresholds</span></span>
<span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span></span>
<span>  <span class="va">testdata</span>,</span>
<span>  column_to_check <span class="op">=</span> <span class="st">"duration_audit_start_end_ms"</span>,</span>
<span>  lower_bound <span class="op">=</span> <span class="fl">375490</span>,</span>
<span>  higher_bound <span class="op">=</span> <span class="fl">8642000</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid duration_audit_start_end_ms duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 1    a                     2475353                               41</span></span>
<span><span class="co">#&gt; 2    b                      375491                                6</span></span>
<span><span class="co">#&gt; 3    c                     2654267                               44</span></span>
<span><span class="co">#&gt; 4    d                      311585                                5</span></span>
<span><span class="co">#&gt; 5    e                      817270                               14</span></span>
<span><span class="co">#&gt; 6    f                     2789505                               46</span></span>
<span><span class="co">#&gt; 7    g                     8642007                              144</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duration_log</span></span>
<span><span class="co">#&gt;   uuid old_value                    question</span></span>
<span><span class="co">#&gt; 1    d    311585 duration_audit_start_end_ms</span></span>
<span><span class="co">#&gt; 2    g   8642007 duration_audit_start_end_ms</span></span>
<span><span class="co">#&gt;                                             issue</span></span>
<span><span class="co">#&gt; 1 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 2 Duration is lower or higher than the thresholds</span></span>
<span></span>
<span><span class="va">testdata</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span>column_to_check <span class="op">=</span> <span class="st">"duration_audit_start_end_minutes"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/check_duration.html">check_duration</a></span><span class="op">(</span></span>
<span>    column_to_check <span class="op">=</span> <span class="st">"duration_audit_start_end_ms"</span>,</span>
<span>    log_name <span class="op">=</span> <span class="st">"duration_in_ms"</span>,</span>
<span>    lower_bound <span class="op">=</span> <span class="fl">375490</span>,</span>
<span>    higher_bound <span class="op">=</span> <span class="fl">8642000</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid duration_audit_start_end_ms duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 1    a                     2475353                               41</span></span>
<span><span class="co">#&gt; 2    b                      375491                                6</span></span>
<span><span class="co">#&gt; 3    c                     2654267                               44</span></span>
<span><span class="co">#&gt; 4    d                      311585                                5</span></span>
<span><span class="co">#&gt; 5    e                      817270                               14</span></span>
<span><span class="co">#&gt; 6    f                     2789505                               46</span></span>
<span><span class="co">#&gt; 7    g                     8642007                              144</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duration_log</span></span>
<span><span class="co">#&gt;   uuid old_value                         question</span></span>
<span><span class="co">#&gt; 1    b         6 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 2    d         5 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 3    e        14 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt; 4    g       144 duration_audit_start_end_minutes</span></span>
<span><span class="co">#&gt;                                             issue</span></span>
<span><span class="co">#&gt; 1 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 2 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 3 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 4 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duration_in_ms</span></span>
<span><span class="co">#&gt;   uuid old_value                    question</span></span>
<span><span class="co">#&gt; 1    d    311585 duration_audit_start_end_ms</span></span>
<span><span class="co">#&gt; 2    g   8642007 duration_audit_start_end_ms</span></span>
<span><span class="co">#&gt;                                             issue</span></span>
<span><span class="co">#&gt; 1 Duration is lower or higher than the thresholds</span></span>
<span><span class="co">#&gt; 2 Duration is lower or higher than the thresholds</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="id_13-check-outliers">1.3 Check outliers<a class="anchor" aria-label="anchor" href="#id_13-check-outliers"></a></h4>
<p><code><a href="reference/check_outliers.html">check_outliers()</a></code> takes raw data set and look for potential outlines. It can both data frame or list. However you must specify the element name (name of your data set in the given list) in <code>element_name</code> parameter!</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">122</span><span class="op">)</span></span>
<span><span class="co">### from list</span></span>
<span><span class="va">df_outlier</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"uuid_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>  one_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">90</span>, min <span class="op">=</span> <span class="fl">45</span>, max <span class="op">=</span> <span class="fl">55</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">99</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  expense <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">200</span><span class="op">:</span><span class="fl">500</span>, replace <span class="op">=</span> <span class="cn">T</span>, size <span class="op">=</span> <span class="fl">95</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">100</span>, <span class="fl">80</span>, <span class="fl">1020</span>, <span class="fl">1050</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">0</span>, <span class="fl">80</span>, <span class="fl">1020</span>, <span class="fl">1050</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">20000</span><span class="op">:</span><span class="fl">50000</span>, replace <span class="op">=</span> <span class="cn">T</span>, size <span class="op">=</span> <span class="fl">95</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  yy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">99</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">outliers</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_outliers.html">check_outliers</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">df_outlier</span>, uuid_column <span class="op">=</span> <span class="st">"uuid"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "checking_one_value"</span></span>
<span><span class="co">#&gt; [1] "checking_expense"</span></span>
<span><span class="co">#&gt; [1] "checking_income"</span></span>
<span><span class="co">#&gt; [1] "checking_yy"</span></span>
<span><span class="va">outliers</span><span class="op">$</span><span class="va">potential_outliers</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   uuid    issue                         question  old_value</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;                         &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 uuid_91 outlier (normal distribution) one_value         1</span></span>
<span><span class="co">#&gt; 2 uuid_92 outlier (normal distribution) one_value         0</span></span>
<span><span class="co">#&gt; 3 uuid_93 outlier (normal distribution) one_value         0</span></span>
<span><span class="co">#&gt; 4 uuid_94 outlier (normal distribution) one_value         0</span></span>
<span><span class="co">#&gt; 5 uuid_95 outlier (normal distribution) one_value         0</span></span>
<span><span class="co">#&gt; 6 uuid_96 outlier (normal distribution) one_value       100</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_14-check-for-value">1.4 Check for value<a class="anchor" aria-label="anchor" href="#id_14-check-for-value"></a></h4>
<p><code><a href="reference/check_value.html">check_value()</a></code> function look for specified value in the given data set and return in a cleaning log format. The function can take a data frame or a list as input.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">122</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  X_uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"uuid_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">18</span><span class="op">:</span><span class="fl">80</span>, replace <span class="op">=</span> <span class="cn">T</span>, size <span class="op">=</span> <span class="fl">96</span><span class="op">)</span>, <span class="fl">99</span>, <span class="fl">99</span>, <span class="fl">98</span>, <span class="fl">88</span><span class="op">)</span>,</span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"99"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">T</span>, size <span class="op">=</span> <span class="fl">95</span><span class="op">)</span>, <span class="st">"98"</span>, <span class="st">"98"</span>, <span class="st">"88"</span>, <span class="st">"888"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_value.html">check_value</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">df</span>, uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, element_name <span class="op">=</span> <span class="st">"checked_dataset"</span>, values_to_look <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">99</span>, <span class="fl">98</span>, <span class="fl">88</span>, <span class="fl">888</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">flaged_value</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   uuid    question old_value issue                             </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;                             </span></span>
<span><span class="co">#&gt; 1 uuid_1  gender   99        Possible value to be changed to NA</span></span>
<span><span class="co">#&gt; 2 uuid_97 age      99        Possible value to be changed to NA</span></span>
<span><span class="co">#&gt; 3 uuid_97 gender   98        Possible value to be changed to NA</span></span>
<span><span class="co">#&gt; 4 uuid_98 age      99        Possible value to be changed to NA</span></span>
<span><span class="co">#&gt; 5 uuid_98 gender   98        Possible value to be changed to NA</span></span>
<span><span class="co">#&gt; 6 uuid_99 age      98        Possible value to be changed to NA</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_15-check-logics">1.5 Check logics<a class="anchor" aria-label="anchor" href="#id_15-check-logics"></a></h4>
<p><code><a href="reference/check_logical.html">check_logical()</a></code> takes a regular expression, as it is how it will be read from Excel <code><a href="reference/check_logical_with_list.html">check_logical_with_list()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  today <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"villageA"</span>, <span class="st">"villageB"</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  distance_to_market <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"less_30"</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"more_30"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  access_to_market <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"yes"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  number_children_05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_logical.html">check_logical</a></span><span class="op">(</span><span class="va">test_data</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  check_to_perform <span class="op">=</span> <span class="st">"distance_to_market == \"less_30\" &amp; access_to_market == \"no\""</span>,</span>
<span>  columns_to_clean <span class="op">=</span> <span class="st">"distance_to_market, access_to_market"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"distance to market less than 30 and no access"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;    uuid      today location distance_to_market access_to_market</span></span>
<span><span class="co">#&gt; 1     1 2023-01-01 villageA            less_30              yes</span></span>
<span><span class="co">#&gt; 2     2 2023-01-01 villageB            less_30              yes</span></span>
<span><span class="co">#&gt; 3     3 2023-01-01 villageA            less_30              yes</span></span>
<span><span class="co">#&gt; 4     4 2023-01-01 villageB            less_30              yes</span></span>
<span><span class="co">#&gt; 5     5 2023-01-01 villageA            less_30               no</span></span>
<span><span class="co">#&gt; 6     6 2023-01-01 villageB            more_30               no</span></span>
<span><span class="co">#&gt; 7     7 2023-01-01 villageA            more_30               no</span></span>
<span><span class="co">#&gt; 8     8 2023-01-01 villageB            more_30               no</span></span>
<span><span class="co">#&gt; 9     9 2023-01-01 villageA            more_30               no</span></span>
<span><span class="co">#&gt; 10   10 2023-01-01 villageB            more_30               no</span></span>
<span><span class="co">#&gt;    number_children_05 logical_xx</span></span>
<span><span class="co">#&gt; 1                   0      FALSE</span></span>
<span><span class="co">#&gt; 2                   1      FALSE</span></span>
<span><span class="co">#&gt; 3                   0      FALSE</span></span>
<span><span class="co">#&gt; 4                   1      FALSE</span></span>
<span><span class="co">#&gt; 5                   0       TRUE</span></span>
<span><span class="co">#&gt; 6                   1      FALSE</span></span>
<span><span class="co">#&gt; 7                   0      FALSE</span></span>
<span><span class="co">#&gt; 8                   1      FALSE</span></span>
<span><span class="co">#&gt; 9                   5      FALSE</span></span>
<span><span class="co">#&gt; 10                  6      FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $logical_xx</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span><span class="co">#&gt;   uuid  question           old_value issue                check_id check_binding</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;                &lt;chr&gt;    &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 5     distance_to_market less_30   distance to market … logical… logical_xx ~…</span></span>
<span><span class="co">#&gt; 2 5     access_to_market   no        distance to market … logical… logical_xx ~…</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distance_to_market <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"less_30"</span>, <span class="st">"more_30"</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  access_to_market <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"yes"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  number_children_05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  number_children_618 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">check_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logical_xx"</span>, <span class="st">"logical_yy"</span>, <span class="st">"logical_zz"</span><span class="op">)</span>,</span>
<span>  check <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"distance_to_market == \"less_30\" &amp; access_to_market == \"no\""</span>,</span>
<span>    <span class="st">"number_children_05 &gt; 3"</span>,</span>
<span>    <span class="st">"rowSums(dplyr::across(starts_with(\"number\")), na.rm = T) &gt; 9"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"distance to market less than 30 and no access"</span>,</span>
<span>    <span class="st">"number of children under 5 seems high"</span>,</span>
<span>    <span class="st">"number of children very high"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  variables_to_clean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"distance_to_market, access_to_market"</span>,</span>
<span>    <span class="st">"number_children_05"</span>,</span>
<span>    <span class="st">""</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_logical_with_list.html">check_logical_with_list</a></span><span class="op">(</span><span class="va">test_data</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  list_of_check <span class="op">=</span> <span class="va">check_list</span>,</span>
<span>  check_id_column <span class="op">=</span> <span class="st">"name"</span>,</span>
<span>  check_to_perform_column <span class="op">=</span> <span class="st">"check"</span>,</span>
<span>  columns_to_clean_column <span class="op">=</span> <span class="st">"variables_to_clean"</span>,</span>
<span>  description_column <span class="op">=</span> <span class="st">"description"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in check_logical(dataset = dataset, uuid_column = uuid_column,</span></span>
<span><span class="co">#&gt; information_to_add = information_to_add, : columns_to_clean not shared, results</span></span>
<span><span class="co">#&gt; may not be accurate</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;    uuid distance_to_market access_to_market number_children_05</span></span>
<span><span class="co">#&gt; 1     1            less_30              yes                  0</span></span>
<span><span class="co">#&gt; 2     2            more_30              yes                  1</span></span>
<span><span class="co">#&gt; 3     3            less_30              yes                  0</span></span>
<span><span class="co">#&gt; 4     4            more_30              yes                  1</span></span>
<span><span class="co">#&gt; 5     5            less_30               no                  0</span></span>
<span><span class="co">#&gt; 6     6            more_30               no                  1</span></span>
<span><span class="co">#&gt; 7     7            less_30               no                  0</span></span>
<span><span class="co">#&gt; 8     8            more_30               no                  1</span></span>
<span><span class="co">#&gt; 9     9            less_30               no                  5</span></span>
<span><span class="co">#&gt; 10   10            more_30               no                  6</span></span>
<span><span class="co">#&gt;    number_children_618 logical_xx logical_yy logical_zz</span></span>
<span><span class="co">#&gt; 1                    0      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2                    1      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3                    0      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4                    1      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5                    0       TRUE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6                    1      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7                    0       TRUE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8                    1      FALSE      FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9                    5       TRUE       TRUE       TRUE</span></span>
<span><span class="co">#&gt; 10                   6      FALSE       TRUE       TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $logical_all</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 6</span></span>
<span><span class="co">#&gt;    uuid  question           old_value               issue check_id check_binding</span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;        </span></span>
<span><span class="co">#&gt;  1 5     distance_to_market less_30                 dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  2 5     access_to_market   no                      dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  3 7     distance_to_market less_30                 dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  4 7     access_to_market   no                      dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  5 9     distance_to_market less_30                 dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  6 9     access_to_market   no                      dist… logical… logical_xx ~…</span></span>
<span><span class="co">#&gt;  7 9     number_children_05 5                       numb… logical… logical_yy ~…</span></span>
<span><span class="co">#&gt;  8 10    number_children_05 6                       numb… logical… logical_yy ~…</span></span>
<span><span class="co">#&gt;  9 9     unable to identify please check this uuid… numb… logical… logical_zz ~…</span></span>
<span><span class="co">#&gt; 10 10    unable to identify please check this uuid… numb… logical… logical_zz ~…</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_16-check-for-duplicates">1.6 Check for duplicates<a class="anchor" aria-label="anchor" href="#id_16-check-for-duplicates"></a></h4>
<div class="section level5">
<h5 id="id_161-with-one-or-several-variables">1.6.1 With one or several variables<a class="anchor" aria-label="anchor" href="#id_161-with-one-or-several-variables"></a></h5>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>  col_a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>,</span>
<span>  col_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_duplicate.html">check_duplicate</a></span><span class="op">(</span><span class="va">testdata</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid     col_a     col_b</span></span>
<span><span class="co">#&gt; 1    a 0.9166284 0.2958878</span></span>
<span><span class="co">#&gt; 2    b 0.3212423 0.6047783</span></span>
<span><span class="co">#&gt; 3    c 0.2052720 0.8932896</span></span>
<span><span class="co">#&gt; 4    d 0.1512732 0.1883179</span></span>
<span><span class="co">#&gt; 5    a 0.8096267 0.3822435</span></span>
<span><span class="co">#&gt; 6    b 0.5861553 0.6640918</span></span>
<span><span class="co">#&gt; 7    c 0.9902022 0.7932066</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duplicate_log</span></span>
<span><span class="co">#&gt;   uuid old_value question           issue</span></span>
<span><span class="co">#&gt; 1    a         a     uuid duplicated uuid</span></span>
<span><span class="co">#&gt; 2    b         b     uuid duplicated uuid</span></span>
<span><span class="co">#&gt; 3    c         c     uuid duplicated uuid</span></span></code></pre></div>
<p>Or you can check duplicate for a specific variable or combination of variables.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">testdata2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  village <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"village"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  ki_identifier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"xx_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/check_duplicate.html">check_duplicate</a></span><span class="op">(</span><span class="va">testdata2</span>, columns_to_check <span class="op">=</span> <span class="st">"village"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid   village ki_identifier</span></span>
<span><span class="co">#&gt; 1    a village 1          xx_1</span></span>
<span><span class="co">#&gt; 2    b village 2          xx_2</span></span>
<span><span class="co">#&gt; 3    c village 3          xx_3</span></span>
<span><span class="co">#&gt; 4    d village 1          xx_4</span></span>
<span><span class="co">#&gt; 5    e village 2          xx_5</span></span>
<span><span class="co">#&gt; 6    f village 3          xx_3</span></span>
<span><span class="co">#&gt; 7    g village 4          xx_4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duplicate_log</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span><span class="co">#&gt;   uuid  question old_value issue             </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;glue&gt;            </span></span>
<span><span class="co">#&gt; 1 d     village  village 1 duplicated village</span></span>
<span><span class="co">#&gt; 2 e     village  village 2 duplicated village</span></span>
<span><span class="co">#&gt; 3 f     village  village 3 duplicated village</span></span>
<span><span class="fu"><a href="reference/check_duplicate.html">check_duplicate</a></span><span class="op">(</span><span class="va">testdata2</span>, columns_to_check <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"village"</span>, <span class="st">"ki_identifier"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid   village ki_identifier</span></span>
<span><span class="co">#&gt; 1    a village 1          xx_1</span></span>
<span><span class="co">#&gt; 2    b village 2          xx_2</span></span>
<span><span class="co">#&gt; 3    c village 3          xx_3</span></span>
<span><span class="co">#&gt; 4    d village 1          xx_4</span></span>
<span><span class="co">#&gt; 5    e village 2          xx_5</span></span>
<span><span class="co">#&gt; 6    f village 3          xx_3</span></span>
<span><span class="co">#&gt; 7    g village 4          xx_4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $duplicate_log</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   uuid  question      old_value issue                               </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;glue&gt;                              </span></span>
<span><span class="co">#&gt; 1 f     village       village 3 duplicated village ~/~ ki_identifier</span></span>
<span><span class="co">#&gt; 2 f     ki_identifier xx_3      duplicated village ~/~ ki_identifier</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="id_162-with-the-gower-distance-soft-duplicates">1.6.2 With the gower distance (soft duplicates)<a class="anchor" aria-label="anchor" href="#id_162-with-the-gower-distance-soft-duplicates"></a></h5>
<p>To use it with the complete dataset:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soft_duplicates</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/check_soft_duplicates.html">check_soft_duplicates</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="va">cleaningtools_raw_data</span>,</span>
<span>  kobo_survey <span class="op">=</span> <span class="va">cleaningtools_survey</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  idnk_value <span class="op">=</span> <span class="st">"dont_know"</span>,</span>
<span>  sm_separator <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  log_name <span class="op">=</span> <span class="st">"soft_duplicate_log"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">7</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">soft_duplicates</span><span class="op">[[</span><span class="st">"soft_duplicate_log"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] uuid  issue</span></span>
<span><span class="co">#&gt; &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span></span>
<span><span class="va">soft_duplicates</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/check_soft_duplicates.html">check_soft_duplicates</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="va">cleaningtools_raw_data</span>,</span>
<span>  kobo_survey <span class="op">=</span> <span class="va">cleaningtools_survey</span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  idnk_value <span class="op">=</span> <span class="st">"dont_know"</span>,</span>
<span>  sm_separator <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  log_name <span class="op">=</span> <span class="st">"soft_duplicate_log"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">7</span>, </span>
<span>  return_all_results <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">soft_duplicates</span><span class="op">[[</span><span class="st">"soft_duplicate_log"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   uuid num_cols_not_NA total_columns_compared</span></span>
<span><span class="co">#&gt; 1 3370f726-395a-4675-94fe-9e745e0b36e9              75                    148</span></span>
<span><span class="co">#&gt; 2 93095da3-5291-4d16-a19a-41bf13144bfe              85                    148</span></span>
<span><span class="co">#&gt; 3 db5e05db-94e9-44aa-9206-3e1c17a7a233              85                    148</span></span>
<span><span class="co">#&gt; 4 dc7bf25b-e18b-4b9e-bb34-5d7a1e762eb2              75                    148</span></span>
<span><span class="co">#&gt; 5 0858486a-1d3d-492b-863f-b050cb9fe7af              74                    148</span></span>
<span><span class="co">#&gt; 6 193d5f36-93b9-4c97-9205-13aa7e3a6c7f              75                    148</span></span>
<span><span class="co">#&gt;   num_cols_dont_know               id_most_similar_survey</span></span>
<span><span class="co">#&gt; 1                  0 dc7bf25b-e18b-4b9e-bb34-5d7a1e762eb2</span></span>
<span><span class="co">#&gt; 2                  0 db5e05db-94e9-44aa-9206-3e1c17a7a233</span></span>
<span><span class="co">#&gt; 3                  0 93095da3-5291-4d16-a19a-41bf13144bfe</span></span>
<span><span class="co">#&gt; 4                  0 3370f726-395a-4675-94fe-9e745e0b36e9</span></span>
<span><span class="co">#&gt; 5                  0 93893e39-9c82-4e19-b480-4dc78033157b</span></span>
<span><span class="co">#&gt; 6                  0 ac42b381-4d3b-42b4-96fb-676d43a8c4e7</span></span>
<span><span class="co">#&gt;   number_different_columns issue</span></span>
<span><span class="co">#&gt; 1                        9  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2                        9  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                        9  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4                        9  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5                       10  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                       10  &lt;NA&gt;</span></span></code></pre></div>
<p>To use it grouping by enumerator:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">group_by_enum_raw_data</span> <span class="op">&lt;-</span> <span class="va">cleaningtools_raw_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">enumerator_num</span><span class="op">)</span></span>
<span><span class="va">soft_per_enum</span> <span class="op">&lt;-</span> <span class="va">group_by_enum_raw_data</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="reference/check_soft_duplicates.html">check_soft_duplicates</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="va">.</span>,</span>
<span>    kobo_survey <span class="op">=</span> <span class="va">cleaningtools_survey</span>,</span>
<span>    uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, idnk_value <span class="op">=</span> <span class="st">"dont_know"</span>,</span>
<span>    sm_separator <span class="op">=</span> <span class="st">"."</span>,</span>
<span>    log_name <span class="op">=</span> <span class="st">"soft_duplicate_log"</span>,</span>
<span>    threshold <span class="op">=</span> <span class="fl">7</span>, </span>
<span>    return_all_results <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="va">soft_per_enum</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.</span><span class="op">[[</span><span class="st">"soft_duplicate_log"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">map2</a></span><span class="op">(</span></span>
<span>    .y <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html" class="external-link">group_keys</a></span><span class="op">(</span><span class="va">group_by_enum_raw_data</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="op">~</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.x</span>, enum <span class="op">=</span> <span class="va">.y</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span>, <span class="va">.</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   uuid num_cols_not_NA total_columns_compared</span></span>
<span><span class="co">#&gt; 1 44614627-c152-4f24-a3ca-87a58b2f2e3f              65                    118</span></span>
<span><span class="co">#&gt; 2 a537a7a3-468c-4661-8b7b-93e43e9b8a3b              63                    118</span></span>
<span><span class="co">#&gt; 3 4cf2c1c2-75a9-4be1-ab1a-09e0b0bec0bd              87                    118</span></span>
<span><span class="co">#&gt; 4 b6dc0988-15d1-49c6-859f-b0e63c18485b              86                    118</span></span>
<span><span class="co">#&gt; 5 55e388ed-fdf2-4d53-96b8-8c406947cad3              64                    118</span></span>
<span><span class="co">#&gt; 6 38d2f047-3036-458b-95fb-fc86f5b7924e              84                    118</span></span>
<span><span class="co">#&gt;   num_cols_dont_know               id_most_similar_survey</span></span>
<span><span class="co">#&gt; 1                  2 a537a7a3-468c-4661-8b7b-93e43e9b8a3b</span></span>
<span><span class="co">#&gt; 2                  1 44614627-c152-4f24-a3ca-87a58b2f2e3f</span></span>
<span><span class="co">#&gt; 3                  2 b6dc0988-15d1-49c6-859f-b0e63c18485b</span></span>
<span><span class="co">#&gt; 4                  2 4cf2c1c2-75a9-4be1-ab1a-09e0b0bec0bd</span></span>
<span><span class="co">#&gt; 5                  4 a537a7a3-468c-4661-8b7b-93e43e9b8a3b</span></span>
<span><span class="co">#&gt; 6                  1 48f2f69f-4958-4180-8f31-e3eb3dedc28d</span></span>
<span><span class="co">#&gt;   number_different_columns issue enum</span></span>
<span><span class="co">#&gt; 1                       17  &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 2                       17  &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 3                       18  &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 4                       18  &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 5                       19  &lt;NA&gt;    1</span></span>
<span><span class="co">#&gt; 6                       22  &lt;NA&gt;    1</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="id_17-check-the-food-consumption-score">1.7 Check the food consumption score<a class="anchor" aria-label="anchor" href="#id_17-check-the-food-consumption-score"></a></h4>
<p>The <code><a href="reference/check_fcs.html">check_fcs()</a></code> function verifies whether all the food consumption components have identical values or not. It will flag the UUIDs where all the values are the same.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_fcs.html">check_fcs</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_food_consumption_df.html">cleaningtools_food_consumption_df</a></span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  cereals_column <span class="op">=</span> <span class="st">"cereals_grains_roots_tubers"</span>,</span>
<span>  pulses_column <span class="op">=</span> <span class="st">"beans_legumes_pulses_nuts"</span>,</span>
<span>  dairy_column <span class="op">=</span> <span class="st">"milk_dairy_products"</span>,</span>
<span>  meat_column <span class="op">=</span> <span class="st">"meat_fish_eggs"</span>,</span>
<span>  vegetables_column <span class="op">=</span> <span class="st">"vegetables"</span>,</span>
<span>  fruits_column <span class="op">=</span> <span class="st">"fruite"</span>,</span>
<span>  oil_column <span class="op">=</span> <span class="st">"oil_fat_butter"</span>,</span>
<span>  sugar_column <span class="op">=</span> <span class="st">"sugar_sugary_food"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in cleaningtools::check_fcs(dataset =</span></span>
<span><span class="co">#&gt; cleaningtools::cleaningtools_food_consumption_df, : Potential issue:: There are</span></span>
<span><span class="co">#&gt; 105 observations where all the variables of food consumption score are the</span></span>
<span><span class="co">#&gt; same.Check result.</span></span>
<span><span class="co">#&gt;                                 X_uuid cereals_grains_roots_tubers</span></span>
<span><span class="co">#&gt; 1 e7da37c0-dd23-4d38-8cac-2e8e8a243b57                           0</span></span>
<span><span class="co">#&gt; 2 f6b056c8-bda7-43d2-a723-582dc8001265                           7</span></span>
<span><span class="co">#&gt; 3 c8a00acf-1626-42f8-8c8f-592aa3c9e688                           1</span></span>
<span><span class="co">#&gt; 4 911204db-f11d-451b-9cd4-44cb76635611                           3</span></span>
<span><span class="co">#&gt; 5 3f6ce5f7-5afe-4bd9-91ab-03c1b81a70ed                           7</span></span>
<span><span class="co">#&gt; 6 cc002ebb-a3e5-4b6b-81ae-cbd9c9b047e8                           1</span></span>
<span><span class="co">#&gt;   beans_legumes_pulses_nuts milk_dairy_products meat_fish_eggs vegetables</span></span>
<span><span class="co">#&gt; 1                         0                   0              0          0</span></span>
<span><span class="co">#&gt; 2                         7                   7              7          7</span></span>
<span><span class="co">#&gt; 3                         1                   1              1          1</span></span>
<span><span class="co">#&gt; 4                         3                   3              3          3</span></span>
<span><span class="co">#&gt; 5                         7                   7              7          7</span></span>
<span><span class="co">#&gt; 6                         1                   1              1          1</span></span>
<span><span class="co">#&gt;   fruite oil_fat_butter sugar_sugary_food</span></span>
<span><span class="co">#&gt; 1      0              0                 0</span></span>
<span><span class="co">#&gt; 2      7              7                 7</span></span>
<span><span class="co">#&gt; 3      1              1                 1</span></span>
<span><span class="co">#&gt; 4      3              3                 3</span></span>
<span><span class="co">#&gt; 5      7              7                 7</span></span>
<span><span class="co">#&gt; 6      1              1                 1</span></span>
<span><span class="co">#&gt;                                                          issue</span></span>
<span><span class="co">#&gt; 1 All the vlaues of of food consumption variables are the same</span></span>
<span><span class="co">#&gt; 2 All the vlaues of of food consumption variables are the same</span></span>
<span><span class="co">#&gt; 3 All the vlaues of of food consumption variables are the same</span></span>
<span><span class="co">#&gt; 4 All the vlaues of of food consumption variables are the same</span></span>
<span><span class="co">#&gt; 5 All the vlaues of of food consumption variables are the same</span></span>
<span><span class="co">#&gt; 6 All the vlaues of of food consumption variables are the same</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_18-check-others-values">1.8 Check others values<a class="anchor" aria-label="anchor" href="#id_18-check-others-values"></a></h4>
<p>The <code><a href="reference/check_others.html">check_others()</a></code> function generate a log for other follow up questions</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_others.html">check_others</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_clean_data.html">cleaningtools_clean_data</a></span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  columns_to_check <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_clean_data.html">cleaningtools_clean_data</a></span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">ends_with</span><span class="op">(</span><span class="st">"_other"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu">contains</span><span class="op">(</span><span class="st">"."</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">other_log</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   uuid                                 question                  old_value issue</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                &lt;chr&gt;                     &lt;chr&gt;     &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 630d0067-d84a-4fd0-8c36-029e87913c40 primary_livelihood_other  عسكري ضم… reco…</span></span>
<span><span class="co">#&gt; 2 ac98cb2b-80a9-4ee9-ba67-6fd38b0247d8 problems_water_main_comp… عدم وصول… reco…</span></span>
<span><span class="co">#&gt; 3 c18fc8f9-c8b7-4ba3-8e61-4460c3604a9d problems_water_main_comp… عدم وصول… reco…</span></span>
<span><span class="co">#&gt; 4 816f41ec-603e-4d5d-a284-8bdb9cbf913d problems_water_main_comp… عدم وجود… reco…</span></span>
<span><span class="co">#&gt; 5 0be815d6-1f31-4d4d-8775-6043df8b9f03 problems_water_main_comp… عدم وجود… reco…</span></span>
<span><span class="co">#&gt; 6 b4588be7-aa42-47de-9d00-e85ec968c1fa problems_water_main_comp… عدم وجود… reco…</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_19-check-percentage-of-missing-values">1.9 Check percentage of missing values.<a class="anchor" aria-label="anchor" href="#id_19-check-percentage-of-missing-values"></a></h4>
<div class="section level5">
<h5 id="id_191-add-the-percentage-missing">1.9.1 Add the percentage missing<a class="anchor" aria-label="anchor" href="#id_191-add-the-percentage-missing"></a></h5>
<p>The <code><a href="reference/add_percentage_missing.html">add_percentage_missing()</a></code> adds the percentage of missing values per row.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  col_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  col_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"expenditures"</span><span class="op">)</span>,</span>
<span>  col_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"with need"</span>, <span class="cn">NA</span>, <span class="st">"with need"</span><span class="op">)</span>,</span>
<span>  col_4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"food health school"</span>, <span class="cn">NA</span>, <span class="st">"food"</span><span class="op">)</span>,</span>
<span>  col_4.food <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  col_4.health <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  col_4.school <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_example</span> <span class="op">&lt;-</span> <span class="va">data_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/add_percentage_missing.html">add_percentage_missing</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">data_example</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   uuid col_1        col_2     col_3              col_4 col_4.food col_4.health</span></span>
<span><span class="co">#&gt; 1    a     1         &lt;NA&gt; with need food health school          1            1</span></span>
<span><span class="co">#&gt; 2    b    NA         &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;         NA           NA</span></span>
<span><span class="co">#&gt; 3    c     3 expenditures with need               food          1            0</span></span>
<span><span class="co">#&gt;   col_4.school percentage_missing</span></span>
<span><span class="co">#&gt; 1            1              0.125</span></span>
<span><span class="co">#&gt; 2           NA              0.875</span></span>
<span><span class="co">#&gt; 3            0              0.000</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="id_192-add_percentage_missing">1.9.2 add_percentage_missing()<a class="anchor" aria-label="anchor" href="#id_192-add_percentage_missing"></a></h5>
<p>The <code><a href="reference/add_percentage_missing.html">add_percentage_missing()</a></code> function will flag if a survey for its missing values. The missing values column can be created with add_percentage_missing and the values are flagged with check_outliers.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/check_percentage_missing.html">check_percentage_missing</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "checking_percentage_missing"</span></span>
<span><span class="co">#&gt; $checked_dataset</span></span>
<span><span class="co">#&gt;   uuid col_1        col_2     col_3              col_4 col_4.food col_4.health</span></span>
<span><span class="co">#&gt; 1    a     1         &lt;NA&gt; with need food health school          1            1</span></span>
<span><span class="co">#&gt; 2    b    NA         &lt;NA&gt;      &lt;NA&gt;               &lt;NA&gt;         NA           NA</span></span>
<span><span class="co">#&gt; 3    c     3 expenditures with need               food          1            0</span></span>
<span><span class="co">#&gt;   col_4.school percentage_missing</span></span>
<span><span class="co">#&gt; 1            1              0.125</span></span>
<span><span class="co">#&gt; 2           NA              0.875</span></span>
<span><span class="co">#&gt; 3            0              0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $percentage_missing_log</span></span>
<span><span class="co">#&gt; # A tibble: 0 × 4</span></span>
<span><span class="co">#&gt; # ℹ 4 variables: uuid &lt;chr&gt;, issue &lt;chr&gt;, question &lt;chr&gt;, old_value &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="id_2-exporting-the-flags-in-excel">2. Exporting the flags in excel.<a class="anchor" aria-label="anchor" href="#id_2-exporting-the-flags-in-excel"></a></h3>
<div class="section level4">
<h4 id="id_21-create_combined_log">2.1 create_combined_log()<a class="anchor" aria-label="anchor" href="#id_21-create_combined_log"></a></h4>
<p>The function <code><a href="reference/create_combined_log.html">create_combined_log()</a></code> takes the cleaning logs as input and returns a list with two elements: the dataset and the combined cleaning log.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_log</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_raw_data.html">cleaningtools_raw_data</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/check_pii.html">check_pii</a></span><span class="op">(</span>uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/check_duplicate.html">check_duplicate</a></span><span class="op">(</span>uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/check_value.html">check_value</a></span><span class="op">(</span>uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_combined_log.html">create_combined_log</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of element to combine- checked_dataset, potential_PII, duplicate_log, flaged_value</span></span>
<span></span>
<span><span class="va">list_log</span><span class="op">$</span><span class="va">cleaning_log</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span><span class="co">#&gt;   uuid              question issue old_value change_type new_value check_binding</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 all               neighbo… Pote… &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;      neighbourhoo…</span></span>
<span><span class="co">#&gt; 2 all               water_s… Pote… &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;      water_supply…</span></span>
<span><span class="co">#&gt; 3 all               water_s… Pote… &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;      water_supply…</span></span>
<span><span class="co">#&gt; 4 all               water_s… Pote… &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;      water_supply…</span></span>
<span><span class="co">#&gt; 5 all               consent… Pote… &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;      consent_tele…</span></span>
<span><span class="co">#&gt; 6 ac26e24d-12be-47… X_index  Poss… 88        &lt;NA&gt;        &lt;NA&gt;      X_index ~/~ …</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_22-add_info_to_cleaning_log">2.2 <code>add_info_to_cleaning_log()</code>
<a class="anchor" aria-label="anchor" href="#id_22-add_info_to_cleaning_log"></a></h4>
<p>The function <code><a href="reference/add_info_to_cleaning_log.html">add_info_to_cleaning_log()</a></code> is designed to add information from the dataset into the cleaning log.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">add_with_info</span> <span class="op">&lt;-</span> <span class="va">list_log</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/add_info_to_cleaning_log.html">add_info_to_cleaning_log</a></span><span class="op">(</span>dataset_uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">add_with_info</span><span class="op">$</span><span class="va">cleaning_log</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   uuid                              question</span></span>
<span><span class="co">#&gt; 1 ac26e24d-12be-4729-bae7-21060ee00a28                               X_index</span></span>
<span><span class="co">#&gt; 2                                  all                         neighbourhood</span></span>
<span><span class="co">#&gt; 3                                  all       water_supply_rest_neighbourhood</span></span>
<span><span class="co">#&gt; 4                                  all     water_supply_other_neighbourhoods</span></span>
<span><span class="co">#&gt; 5                                  all water_supply_other_neighbourhoods_why</span></span>
<span><span class="co">#&gt; 6                                  all              consent_telephone_number</span></span>
<span><span class="co">#&gt;                                issue old_value change_type new_value</span></span>
<span><span class="co">#&gt; 1 Possible value to be changed to NA        88        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2                      Potential PII      &lt;NA&gt;        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                      Potential PII      &lt;NA&gt;        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4                      Potential PII      &lt;NA&gt;        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5                      Potential PII      &lt;NA&gt;        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                      Potential PII      &lt;NA&gt;        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                                      check_binding enumerator_num</span></span>
<span><span class="co">#&gt; 1 X_index ~/~ ac26e24d-12be-4729-bae7-21060ee00a28             13</span></span>
<span><span class="co">#&gt; 2                            neighbourhood ~/~ all             NA</span></span>
<span><span class="co">#&gt; 3          water_supply_rest_neighbourhood ~/~ all             NA</span></span>
<span><span class="co">#&gt; 4        water_supply_other_neighbourhoods ~/~ all             NA</span></span>
<span><span class="co">#&gt; 5    water_supply_other_neighbourhoods_why ~/~ all             NA</span></span>
<span><span class="co">#&gt; 6                 consent_telephone_number ~/~ all             NA</span></span>
<span><span class="co">#&gt;   date_assessment</span></span>
<span><span class="co">#&gt; 1      2021-07-06</span></span>
<span><span class="co">#&gt; 2            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_23-create_xlsx_cleaning_log">2.3 <code>create_xlsx_cleaning_log()</code>
<a class="anchor" aria-label="anchor" href="#id_23-create_xlsx_cleaning_log"></a></h4>
<p>The function <code><a href="reference/add_info_to_cleaning_log.html">add_info_to_cleaning_log()</a></code> is designed to add information from the dataset into the cleaning log.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">add_with_info</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_xlsx_cleaning_log.html">create_xlsx_cleaning_log</a></span><span class="op">(</span></span>
<span>    kobo_survey <span class="op">=</span> <span class="va">cleaningtools_survey</span>,</span>
<span>    kobo_choices <span class="op">=</span> <span class="va">cleaningtools_choices</span>,</span>
<span>    use_dropdown <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    output_path <span class="op">=</span> <span class="st">"mycleaninglog.xlsx"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="id_3-create-a-clean-data">3. Create a clean data<a class="anchor" aria-label="anchor" href="#id_3-create-a-clean-data"></a></h3>
<p>We are creating a dataset and cleaning log for the example</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"uuid"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">180</span>, <span class="fl">23</span>, <span class="fl">45</span>, <span class="fl">67</span><span class="op">)</span>,</span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span>,</span>
<span>  pop_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"idp"</span>, <span class="st">"refugee"</span>, <span class="st">"host"</span>, <span class="st">"idp"</span><span class="op">)</span>,</span>
<span>  strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">test_data</span></span>
<span><span class="co">#&gt;    uuid age gender pop_group strata</span></span>
<span><span class="co">#&gt; 1 uuid1 180   male       idp      a</span></span>
<span><span class="co">#&gt; 2 uuid2  23 female   refugee      b</span></span>
<span><span class="co">#&gt; 3 uuid3  45   male      host      c</span></span>
<span><span class="co">#&gt; 4 uuid4  67 female       idp      d</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cleaning_log_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"uuid"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  question <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"gender"</span>, <span class="st">"pop_group"</span>, <span class="st">"strata"</span><span class="op">)</span>,</span>
<span>  change_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blank_response"</span>, <span class="st">"no_change"</span>, <span class="st">"Delete"</span>, <span class="st">"change_res"</span><span class="op">)</span>,</span>
<span>  new_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA_character_</span>, <span class="cn">NA_character_</span>, <span class="cn">NA_character_</span>, <span class="st">"st-a"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cleaning_log_test</span></span>
<span><span class="co">#&gt;    uuid  question    change_type new_value</span></span>
<span><span class="co">#&gt; 1 uuid1       age blank_response      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2 uuid2    gender      no_change      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 uuid3 pop_group         Delete      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 uuid4    strata     change_res      st-a</span></span></code></pre></div>
<div class="section level4">
<h4 id="id_31-check-the-cleaning-log">3.1 Check the cleaning log<a class="anchor" aria-label="anchor" href="#id_31-check-the-cleaning-log"></a></h4>
<p>After obtaining both the cleaning log and dataset, it is considered good practice to utilize the review_cleaning_log() function to ensure the consistency between the cleaning log and the dataset. It is highly recommended to perform this check on a daily basis, enabling you to promptly identify any issues right from the outset.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/review_cleaning_log.html">review_cleaning_log</a></span><span class="op">(</span></span>
<span>  raw_dataset <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>  raw_data_uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  cleaning_log <span class="op">=</span> <span class="va">cleaning_log_test</span>,</span>
<span>  cleaning_log_change_type_column <span class="op">=</span> <span class="st">"change_type"</span>,</span>
<span>  change_response_value <span class="op">=</span> <span class="st">"change_res"</span>,</span>
<span>  cleaning_log_question_column <span class="op">=</span> <span class="st">"question"</span>,</span>
<span>  cleaning_log_uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  cleaning_log_new_value_column <span class="op">=</span> <span class="st">"new_value"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "no issues in cleaning log found"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_32-create-the-clean-data-from-the-raw-data-and-cleaning-log">3.2 Create the clean data from the raw data and cleaning log<a class="anchor" aria-label="anchor" href="#id_32-create-the-clean-data-from-the-raw-data-and-cleaning-log"></a></h4>
<p>Once you have a perfect cleaning log and the raw dataset, you can create clean data by applying<code><a href="reference/create_clean_data.html">create_clean_data()</a></code> function.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/create_clean_data.html">create_clean_data</a></span><span class="op">(</span></span>
<span>  raw_dataset <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>  raw_data_uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  cleaning_log <span class="op">=</span> <span class="va">cleaning_log_test</span>,</span>
<span>  cleaning_log_change_type_column <span class="op">=</span> <span class="st">"change_type"</span>,</span>
<span>  change_response_value <span class="op">=</span> <span class="st">"change_res"</span>,</span>
<span>  NA_response_value <span class="op">=</span> <span class="st">"blank_response"</span>,</span>
<span>  no_change_value <span class="op">=</span> <span class="st">"no_change"</span>,</span>
<span>  remove_survey_value <span class="op">=</span> <span class="st">"Delete"</span>,</span>
<span>  cleaning_log_question_column <span class="op">=</span> <span class="st">"question"</span>,</span>
<span>  cleaning_log_uuid_column <span class="op">=</span> <span class="st">"uuid"</span>,</span>
<span>  cleaning_log_new_value_column <span class="op">=</span> <span class="st">"new_value"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "age"</span></span>
<span><span class="co">#&gt; [1] "strata"</span></span>
<span><span class="co">#&gt;    uuid age gender pop_group strata</span></span>
<span><span class="co">#&gt; 1 uuid1  NA   male       idp      a</span></span>
<span><span class="co">#&gt; 2 uuid2  23 female   refugee      b</span></span>
<span><span class="co">#&gt; 3 uuid4  67 female       idp   st-a</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_33-recreate-parent-column-for-choice-multiple">3.3 Recreate parent column for choice multiple<a class="anchor" aria-label="anchor" href="#id_33-recreate-parent-column-for-choice-multiple"></a></h4>
<p><code><a href="reference/recreate_parent_column.html">recreate_parent_column()</a></code> recreates the concerted columns for select multiple questions</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  uuid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"uuid_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  reason <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"xx,yy"</span>, <span class="st">"xx,zy"</span>,</span>
<span>    <span class="st">"zy"</span>, <span class="st">"xx,xz,zy"</span>,</span>
<span>    <span class="cn">NA_character_</span>, <span class="st">"xz"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  reason.x.x. <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  reason.yy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  reason.x.z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  reason.zy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  reason_zy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA_character_</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="cn">NA_character_</span>, <span class="cn">NA_character_</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/recreate_parent_column.html">recreate_parent_column</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">test_data</span>, uuid_column <span class="op">=</span> <span class="st">"uuid"</span>, sm_separator <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in cleaningtools::recreate_parent_column(dataset = test_data,</span></span>
<span><span class="co">#&gt; uuid_column = "uuid", : Column(s) names are renamed as multiple separators are</span></span>
<span><span class="co">#&gt; found in dataset column names. Please see the above table with the new name.</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   old_name    new_name   </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 reason.x.x. reason.x_x_</span></span>
<span><span class="co">#&gt; 2 reason.x.z  reason.x_z</span></span>
<span><span class="co">#&gt; gender</span></span>
<span><span class="co">#&gt; reason.yy</span></span>
<span><span class="co">#&gt; reason.zy</span></span>
<span><span class="co">#&gt; reason_zy</span></span>
<span><span class="co">#&gt; gender</span></span>
<span><span class="co">#&gt; reason.yy</span></span>
<span><span class="co">#&gt; reason.zy</span></span>
<span><span class="co">#&gt; reason_zy</span></span>
<span><span class="co">#&gt; gender</span></span>
<span><span class="co">#&gt; reason</span></span>
<span><span class="co">#&gt; reason.yy</span></span>
<span><span class="co">#&gt; reason.zy</span></span>
<span><span class="co">#&gt; reason_zy</span></span>
<span><span class="co">#&gt; $data_with_fix_concat</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span><span class="co">#&gt;   uuid   gender reason      reason.x_x_ reason.yy reason.x_z reason.zy reason_zy</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span><span class="co">#&gt; 1 uuid_1 male   yy                    0         1          0         0 &lt;NA&gt;     </span></span>
<span><span class="co">#&gt; 2 uuid_2 female x_x_ zy               1         0          0         1 A        </span></span>
<span><span class="co">#&gt; 3 uuid_3 male   zy                    0         0          0         1 B        </span></span>
<span><span class="co">#&gt; 4 uuid_4 female x_x_ x_z zy           1         0          1         1 C        </span></span>
<span><span class="co">#&gt; 5 uuid_5 male   yy                    0         1          0         0 &lt;NA&gt;     </span></span>
<span><span class="co">#&gt; 6 uuid_6 female x_z                   0         0          1         0 &lt;NA&gt;     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $correction_parent_sm_log</span></span>
<span><span class="co">#&gt;     uuid    question      change_type   new_value old_value</span></span>
<span><span class="co">#&gt; 1    all reason.x.x. variable_removed        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2    all  reason.x.z variable_removed        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3    all reason.x_x_   variable_added        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4    all  reason.x_z   variable_added        &lt;NA&gt;      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 uuid_1      reason  change_response          yy     xx,yy</span></span>
<span><span class="co">#&gt; 6 uuid_2      reason  change_response     x_x_ zy     xx,zy</span></span>
<span><span class="co">#&gt; 7 uuid_4      reason  change_response x_x_ x_z zy  xx,xz,zy</span></span>
<span><span class="co">#&gt; 8 uuid_6      reason  change_response         x_z        xz</span></span>
<span><span class="co">#&gt; 9 uuid_5      reason  change_response          yy      &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                                           comment</span></span>
<span><span class="co">#&gt; 1         variable removed from the clean dataset</span></span>
<span><span class="co">#&gt; 2         variable removed from the clean dataset</span></span>
<span><span class="co">#&gt; 3             variable added to the clean dataset</span></span>
<span><span class="co">#&gt; 4             variable added to the clean dataset</span></span>
<span><span class="co">#&gt; 5 Parent column changed to match children columns</span></span>
<span><span class="co">#&gt; 6 Parent column changed to match children columns</span></span>
<span><span class="co">#&gt; 7 Parent column changed to match children columns</span></span>
<span><span class="co">#&gt; 8 Parent column changed to match children columns</span></span>
<span><span class="co">#&gt; 9                             NA changed to value</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="id_4-review-of-the-cleaning">4. Review of the cleaning<a class="anchor" aria-label="anchor" href="#id_4-review-of-the-cleaning"></a></h3>
<div class="section level4">
<h4 id="id_41-review-cleaning-log-with-clean-data-and-raw-data">4.1 Review cleaning log with clean data and raw data<a class="anchor" aria-label="anchor" href="#id_41-review-cleaning-log-with-clean-data-and-raw-data"></a></h4>
<p><code>review_cleaning</code> function takes raw data, clean data and cleaning log as inputs, and it first creates the cleaning log by comparing raw data and clean data, then compares it with the user-provided cleaning log. Finally, flagged the discrepancies between them (if any).</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">compared_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/review_cleaning.html">review_cleaning</a></span><span class="op">(</span></span>
<span>  raw_dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_raw_data.html">cleaningtools_raw_data</a></span>,</span>
<span>  raw_dataset_uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  clean_dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_clean_data.html">cleaningtools_clean_data</a></span>,</span>
<span>  clean_dataset_uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  cleaning_log <span class="op">=</span> <span class="va">cleaning_log2</span>,</span>
<span>  cleaning_log_uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  cleaning_log_question_column <span class="op">=</span> <span class="st">"questions"</span>,</span>
<span>  cleaning_log_new_value_column <span class="op">=</span> <span class="st">"new_value"</span>,</span>
<span>  cleaning_log_old_value_column <span class="op">=</span> <span class="st">"old_value"</span>,</span>
<span>  deletion_log <span class="op">=</span> <span class="va">deletion</span>,</span>
<span>  deletion_log_uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>,</span>
<span>  check_for_deletion_log <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There were 2 warnings in `dplyr::mutate()`.</span></span>
<span><span class="co">#&gt; The first warning was:</span></span>
<span><span class="co">#&gt; ℹ In argument: `numerical_check = as.numeric(df.new_value) ==</span></span>
<span><span class="co">#&gt;   as.numeric(df.old_value)`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; ! NAs introduced by coercion</span></span>
<span><span class="co">#&gt; ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</span></span>
<span></span>
<span><span class="va">compared_df</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span><span class="co">#&gt;   uuid         df.question df.change_type df.new_value cl.new_value df.old_value</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 1a80239e-a8… air_cooler… change_respon… &lt;NA&gt;         4            &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; 2 a37512fa-f4… air_cooler… change_respon… &lt;NA&gt;         2            &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; 3 bdcca634-6e… air_cooler… no_action      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; 4 dd3a9983-0b… connection… no_action      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; 5 9dac8c9e-a5… connection… no_action      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; 6 2b148a6e-90… days_avail… no_action      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;        </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: cl.old_value &lt;chr&gt;, comment &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_42-example-the-review_others-function-reviews-discrepancy-between-kobo-relevancies-and-the-dataset">4.2 Example:: The <code>review_others()</code> function reviews discrepancy between kobo relevancies and the dataset<a class="anchor" aria-label="anchor" href="#id_42-example-the-review_others-function-reviews-discrepancy-between-kobo-relevancies-and-the-dataset"></a></h4>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/review_others.html">review_others</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_clean_data.html">cleaningtools_clean_data</a></span>,</span>
<span>  uuid_column <span class="op">=</span> <span class="st">"X_uuid"</span>, kobo_survey <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_survey.html">cleaningtools_survey</a></span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   uuid                 question old_value</span></span>
<span><span class="co">#&gt; 1 f58a7fda-27e8-4003-90b3-479bebbb99ab consent_telephone_number       yes</span></span>
<span><span class="co">#&gt; 2 956b5ed0-5a62-41b7-aec3-af93fbc5b494 consent_telephone_number       yes</span></span>
<span><span class="co">#&gt; 3 3413afd2-8f05-4a6e-8ec7-5d64dc8fea23 consent_telephone_number       yes</span></span>
<span><span class="co">#&gt; 4 630d0067-d84a-4fd0-8c36-029e87913c40 consent_telephone_number       yes</span></span>
<span><span class="co">#&gt; 5 2cd180e8-7f2b-460b-82b5-fb9d163f8e7b consent_telephone_number       yes</span></span>
<span><span class="co">#&gt; 6 929d60f8-ed9c-4c42-9ee1-cb4a67e4ba27 consent_telephone_number       yes</span></span>
<span><span class="co">#&gt;                                                                                   issue</span></span>
<span><span class="co">#&gt; 1 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt; 2 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt; 3 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt; 4 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt; 5 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt; 6 consent_telephone_number is selected but telephone_number is not found in the dataset</span></span>
<span><span class="co">#&gt;   check_id                                   check_binding</span></span>
<span><span class="co">#&gt; 1   id- 27 id- 27 ~/~ f58a7fda-27e8-4003-90b3-479bebbb99ab</span></span>
<span><span class="co">#&gt; 2   id- 27 id- 27 ~/~ 956b5ed0-5a62-41b7-aec3-af93fbc5b494</span></span>
<span><span class="co">#&gt; 3   id- 27 id- 27 ~/~ 3413afd2-8f05-4a6e-8ec7-5d64dc8fea23</span></span>
<span><span class="co">#&gt; 4   id- 27 id- 27 ~/~ 630d0067-d84a-4fd0-8c36-029e87913c40</span></span>
<span><span class="co">#&gt; 5   id- 27 id- 27 ~/~ 2cd180e8-7f2b-460b-82b5-fb9d163f8e7b</span></span>
<span><span class="co">#&gt; 6   id- 27 id- 27 ~/~ 929d60f8-ed9c-4c42-9ee1-cb4a67e4ba27</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_43-example-review_sample_frame_with_dataset">4.3 Example:: <code>review_sample_frame_with_dataset()</code>
<a class="anchor" aria-label="anchor" href="#id_43-example-review_sample_frame_with_dataset"></a></h4>
<p><code><a href="reference/review_sample_frame_with_dataset.html">review_sample_frame_with_dataset()</a></code> compares the sample frame with dataset and provide the overview of completed and remaining surveys.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">review_output</span> <span class="op">&lt;-</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="fu"><a href="reference/review_sample_frame_with_dataset.html">review_sample_frame_with_dataset</a></span><span class="op">(</span></span>
<span>  sample_frame <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_sample_frame.html">cleaningtools_sample_frame</a></span>,</span>
<span>  sampling_frame_strata_column <span class="op">=</span> <span class="st">"Neighbourhood"</span>,</span>
<span>  sampling_frame_target_survey_column <span class="op">=</span> <span class="st">"Total.no.of.HH"</span>,</span>
<span>  clean_dataset <span class="op">=</span> <span class="fu">cleaningtools</span><span class="fu">::</span><span class="va"><a href="reference/cleaningtools_clean_data.html">cleaningtools_clean_data</a></span>,</span>
<span>  clean_dataset_strata_column <span class="op">=</span> <span class="st">"neighbourhood"</span>,</span>
<span>  consent_column <span class="op">=</span> <span class="st">"consent_remote"</span>,</span>
<span>  consent_yes_value <span class="op">=</span> <span class="st">"yes"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">review_output</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Managed.by Governorate Neighbourhood Total.no.of.HH Collected Remaining</span></span>
<span><span class="co">#&gt; 1   Talafar       Ninewa            A1             22        22         0</span></span>
<span><span class="co">#&gt; 2   Talafar       Ninewa            A2             19        19         0</span></span>
<span><span class="co">#&gt; 3   Talafar       Ninewa            A3              5         5         0</span></span>
<span><span class="co">#&gt; 4   Talafar       Ninewa            A4              6         6         0</span></span>
<span><span class="co">#&gt; 5   Talafar       Ninewa            B1             12        12         0</span></span>
<span><span class="co">#&gt; 6   Talafar       Ninewa            B2             15        15         0</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a></h2>
<p>Please note that the cleaningtools project is released with a <a href="https://impact-initiatives.github.io/cleaningtools/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mehedi Khan, Yann Say.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

